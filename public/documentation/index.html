<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Documentation | Czechichat</title>
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
			integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
			crossorigin="anonymous"
		/>
		<style>
			textarea.form-control[readonly] {
				padding-left: 30px;
				resize: none;
				background-color: #fdfdfd;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<h1 class="mt-5 mb-3">Czechichat documentation</h1>

			<h2>Get recent messages</h2>
			<code>&lt;script&gt;</code>
			<div>
				<textarea class="form-control" readonly rows="3">
fetch('/api/list-messages')
	.then(response => response.json())
	.then(data => console.log(data.messages))</textarea
				>
			</div>
			<code>&lt;/script&gt;</code>

			<h2 class="mt-3">Send message</h2>
			<code>&lt;script&gt;</code>
			<div>
				<textarea class="form-control" readonly rows="7">
fetch('/api/send-message', {
	method: 'POST',
	headers: {
		'content-type': 'application/json'
	},
	body: '{"name":"John","message":"Hi there!"}'
})</textarea
				>
			</div>
			<code>&lt;/script&gt;</code>

			<h2 class="mt-3">Demo</h2>
			<a href="..">here</a>

			<footer class="text-right mt-3 mb-5">
				Source code at
				<a href="https://github.com/FilipChalupa/Czechichat">GitHub</a>
			</footer>
		</div>
		<script>
			const areas = document.querySelectorAll('textarea')
			areas.forEach((area) => {
				console.log(area.value)
				area.value = area.value.replaceAll(
					"fetch('",
					`fetch('${location.origin}`,
				)
			})
		</script>
	</body>
</html>
